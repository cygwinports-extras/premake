DESCRIPTION=
HOMEPAGE="http://premake.sourceforge.net/"
SRC_URI="mirror://sourceforge/${PN}/${PN}-src-${PV}.zip"
SRC_DIR="Premake-${PV}"

PATCH_URI="3.5-os-cygwin.patch"

MAKEOPTS+=" -j1"

src_compile() {
	lndirs
	cd ${B}
	cygmake
}

src_test() {
	if check_prog mcs
	then
		cd ${B}/Tests
		verbose ${B}/bin/premake --file premake.lua --target gnu
		cygmake clean
		cygmake
	fi
}

src_install() {
	dobin ${B}/bin/premake
}
